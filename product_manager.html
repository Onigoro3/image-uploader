<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å•†å“ç®¡ç† - ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ€ãƒ¼</title>
    <style>
        /* --- å…±é€šè¨­å®š --- */
        body { font-family: "Helvetica Neue", Arial, sans-serif; line-height: 1.6; padding: 10px; margin: 0; background-color: #f0fdf4; color: #333; }
        
        #nav-bar { 
            padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; 
            border-bottom: 1px solid #bbf7d0; background: #fff; margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        #nav-bar span { font-weight: bold; color: #166534; font-size: 1.1em; }
        .nav-btn { color: #15803d; text-decoration: none; font-weight: bold; border: 1px solid #15803d; padding: 5px 10px; border-radius: 4px; background: white; }
        .nav-btn:hover { background: #f0fdf4; }

        .panel { 
            background: #fff; padding: 20px; border-radius: 8px; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.05); margin-bottom: 20px; 
            max-width: 1200px; margin-left: auto; margin-right: auto; border: 1px solid #e2e8f0;
        }
        h3 { color: #166534; border-bottom: 2px solid #bbf7d0; padding-bottom: 10px; margin: 0 0 15px 0; display: flex; justify-content: space-between; align-items: center; }
        
        /* ã‚«ãƒ†ã‚´ãƒªæ“ä½œã‚¨ãƒªã‚¢ */
        .cat-creation-area {
            background: #f0f9ff; border: 1px solid #bae6fd; padding: 15px; border-radius: 6px; margin-bottom: 20px;
            display: flex; gap: 10px; align-items: flex-end; flex-wrap: wrap;
        }
        .input-group { display: flex; flex-direction: column; flex: 1; min-width: 150px; }
        .input-group label { font-size: 0.85em; font-weight: bold; color: #0284c7; margin-bottom: 4px; }
        .input-group input { padding: 8px; border: 1px solid #ccc; border-radius: 4px; }

        /* ã‚«ãƒ†ã‚´ãƒªãƒªã‚¹ãƒˆ (3åˆ—) */
        #gallery-section { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 20px; }
        .gallery-column { border: 1px solid #e2e8f0; padding: 0; border-radius: 6px; background: #f8fafc; height: 350px; overflow-y: auto; }
        .gallery-column h4 { margin: 0; padding: 8px; background: #e2e8f0; border-bottom: 1px solid #cbd5e1; font-size: 0.85em; text-align: center; color: #475569; position: sticky; top: 0; z-index: 10; }
        
        .gallery-item { 
            padding: 8px 10px; border-bottom: 1px solid #f1f5f9; font-size: 14px; 
            background: #fff; display: flex; justify-content: space-between; align-items: center; 
            cursor: pointer; transition: background 0.1s;
        }
        .gallery-item:hover { background-color: #f0fdf4; }
        .gallery-item.active { background-color: #dcfce7; font-weight: bold; color: #166534; border-left: 4px solid #166534; }
        .count-badge { font-size: 0.85em; color: #888; margin-left: 5px; }
        .gallery-item.active .count-badge { color: #15803d; }
        
        /* ç·¨é›†ãƒœã‚¿ãƒ³ */
        .item-actions { display: flex; gap: 5px; }
        .edit-btn { background: none; border: none; cursor: pointer; color: #f59e0b; font-size: 1.1em; padding: 0 5px; }
        .edit-btn:hover { color: #d97706; }

        /* CSVç™»éŒ²ã‚¨ãƒªã‚¢ */
        .import-area { padding: 20px; background: #f0fdf4; border-radius: 6px; border: 2px dashed #bbf7d0; display: flex; flex-direction: column; align-items: center; gap: 10px; }
        input[type="file"] { padding: 10px; background: #fff; border-radius: 4px; border: 1px solid #ddd; width: 100%; max-width: 400px; }
        button.action-btn { padding: 10px 20px; cursor: pointer; border-radius: 4px; border: none; font-weight: bold; color: white; background: #15803d; transition: opacity 0.2s; }
        button.action-btn:hover { opacity: 0.9; }

        /* CSVãƒªã‚¹ãƒˆ */
        #csv-file-list { margin-top: 10px; }
        .csv-item { padding: 12px; border: 1px solid #eee; background: #fff; margin-bottom: 5px; border-radius: 4px; border-left: 4px solid #15803d; }
        .csv-header { display: flex; justify-content: space-between; align-items: center; font-weight: bold; }
        .csv-meta { font-size: 0.85em; color: #666; margin-top: 5px; display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
        .csv-tag { background: #e2e8f0; padding: 2px 8px; border-radius: 10px; font-size: 0.8em; color: #333; }
        
        .csv-actions button { margin-left: 5px; padding: 4px 10px; font-size: 12px; color: white; border-radius: 3px; border: none; cursor: pointer; }

        /* ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ */
        #db-stats { display: flex; justify-content: space-around; background: #e8f5e9; padding: 15px; border-radius: 6px; margin-bottom: 20px; }
        #db-stats div { text-align: center; }
        #db-stats b { display: block; font-size: 1.5em; color: #333; }
        #db-stats span { font-size: 0.9em; color: #666; }

        /* å…¨ãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºãƒ†ãƒ¼ãƒ–ãƒ« */
        #all-data-container { margin-top: 20px; overflow-x: auto; display: none; border-top: 1px solid #ddd; padding-top: 10px; }
        table { width: 100%; border-collapse: collapse; font-size: 14px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; white-space: nowrap; }
        th { background-color: #f4f4f4; font-weight: bold; }

        @media (max-width: 768px) { #gallery-section { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div id="nav-bar">
        <span>ğŸ› ï¸ ç®¡ç†ãƒ¡ãƒ‹ãƒ¥ãƒ¼</span>
        <div>
            <a href="/" class="nav-btn">ç”»åƒä¸€è¦§ã¸</a>
            <a href="/personal" class="nav-btn" style="border-color:#0ea5e9; color:#0ea5e9; margin-left:5px;">å€‹äººã‚¢ãƒ«ãƒãƒ </a>
        </div>
    </div>

    <div class="panel">
        <h3>ç¾åœ¨ã®ç™»éŒ²çŠ¶æ³</h3>
        <div id="db-stats">
            <div><b id="stat-img">-</b><span>ç”»åƒ</span></div>
            <div><b id="stat-prod">-</b><span>å•†å“ãƒ‡ãƒ¼ã‚¿</span></div>
            <div><b id="stat-link" style="color:#15803d;">-</b><span>ç´ä»˜ã‘æ¸ˆã¿</span></div>
        </div>
        <div style="text-align: center; display:flex; justify-content:center; gap:10px;">
            <button id="check-mismatch-btn" class="action-btn" style="background:#f59e0b; font-size:0.9em;">ä¸ä¸€è‡´ã‚’è¨ºæ–­</button>
            <button id="show-all-data-btn" class="action-btn" style="background:#0ea5e9; font-size:0.9em;">ç™»éŒ²ãƒ‡ãƒ¼ã‚¿ç¢ºèª (å…¨ä»¶)</button>
        </div>

        <div id="all-data-container">
            <button onclick="document.getElementById('all-data-container').style.display='none'" style="margin-bottom:10px; background:#666; color:fff; border:none; padding:5px 10px; border-radius:4px; cursor:pointer;">é–‰ã˜ã‚‹</button>
            <table id="all-data-table"></table>
        </div>
    </div>

    <div class="panel">
        <h3>ğŸ“‚ ã‚«ãƒ†ã‚´ãƒªé¸æŠãƒ»ç·¨é›†</h3>
        <p style="font-size:0.9em; color:#666;">CSVã®ç™»éŒ²å…ˆã€ãŠã‚ˆã³ä¸‹ã®ãƒªã‚¹ãƒˆã®çµã‚Šè¾¼ã¿ã«ä½¿ç”¨ã—ã¾ã™ã€‚</p>
        
        <div class="cat-creation-area">
            <div class="input-group">
                <label>å¤§ã‚«ãƒ†ã‚´ãƒª (å¿…é ˆ)</label>
                <input type="text" id="newC1" placeholder="ä¾‹: ãƒã‚±ã‚«">
            </div>
            <div class="input-group">
                <label>ä¸­ã‚«ãƒ†ã‚´ãƒª</label>
                <input type="text" id="newC2" placeholder="ä¾‹: BOX">
            </div>
            <div class="input-group">
                <label>å°ã‚«ãƒ†ã‚´ãƒª</label>
                <input type="text" id="newC3" placeholder="ä¾‹: 151">
            </div>
            <button class="action-btn" id="createCatBtn" style="background:#0ea5e9; height: 38px;">ã‚«ãƒ†ã‚´ãƒªä½œæˆ</button>
        </div>
        
        <div id="gallery-section">
            <div id="cat1-container" class="gallery-column"><h4>å¤§ã‚«ãƒ†ã‚´ãƒª</h4></div>
            <div id="cat2-container" class="gallery-column"><h4>ä¸­ã‚«ãƒ†ã‚´ãƒª</h4></div>
            <div id="cat3-container" class="gallery-column"><h4>å°ã‚«ãƒ†ã‚´ãƒª</h4></div>
        </div>
        <div id="selected-path-display" style="padding:10px; background:#f0fdf4; border:1px solid #bbf7d0; border-radius:4px; font-weight:bold; text-align:center;">
            é¸æŠä¸­: <span style="color:#999;">(ãªã—)</span>
        </div>
    </div>

    <div class="panel">
        <h3>ğŸ“¥ CSVå•†å“ãƒ‡ãƒ¼ã‚¿ç™»éŒ² <button onclick="location.href='/api/products/template'" style="font-size:0.7em; padding:4px 8px; background:#666; color:white; border:none; border-radius:4px; cursor:pointer;">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆDL</button></h3>
        <div class="import-area">
            <div style="font-weight:bold; color:#166534; margin-bottom:5px;" id="csv-target-display">ç™»éŒ²å…ˆ: æœªé¸æŠ</div>
            <input type="file" id="productCsvInput" accept=".csv">
            <button id="importCsvBtn" class="action-btn">ã“ã®ã‚«ãƒ†ã‚´ãƒªã«CSVã‚’ç™»éŒ²</button>
            <p id="csvImportStatus" style="font-weight: bold; color: green; min-height: 1.2em; text-align:center;"></p>
        </div>
    </div>

    <div class="panel">
        <h3><span id="csv-list-title">ğŸ“‹ ç™»éŒ²æ¸ˆã¿CSVä¸€è¦§</span></h3>
        <div id="csv-file-list">èª­ã¿è¾¼ã¿ä¸­...</div>
    </div>

    <script>
        // èªè¨¼ãƒã‚§ãƒƒã‚¯
        fetch('/api/auth/check').then(r=>r.json()).then(d=>{if(!d.loggedIn)location.href='/login'});

        const els = {
            stImg: document.getElementById('stat-img'), stProd: document.getElementById('stat-prod'), stLink: document.getElementById('stat-link'),
            checkBtn: document.getElementById('check-mismatch-btn'), showAllBtn: document.getElementById('show-all-data-btn'),
            allDataBox: document.getElementById('all-data-container'), allDataTable: document.getElementById('all-data-table'),
            
            newC1: document.getElementById('newC1'), newC2: document.getElementById('newC2'), newC3: document.getElementById('newC3'),
            createBtn: document.getElementById('createCatBtn'),
            c1Box: document.getElementById('cat1-container'), c2Box: document.getElementById('cat2-container'), c3Box: document.getElementById('cat3-container'),
            pathDisp: document.getElementById('selected-path-display'), targetDisp: document.getElementById('csv-target-display'),
            
            csvIn: document.getElementById('productCsvInput'), impBtn: document.getElementById('importCsvBtn'), impStat: document.getElementById('csvImportStatus'),
            csvList: document.getElementById('csv-file-list'), listTitle: document.getElementById('csv-list-title')
        };

        let sels = { c1: null, c2: null, c3: null };
        let csvData = [];

        document.addEventListener('DOMContentLoaded', () => {
            loadCat1(); 
            loadStats();
            loadCsvList();
        });

        // --- ã‚«ãƒ†ã‚´ãƒªä½œæˆ ---
        els.createBtn.onclick = async () => {
            const c1 = els.newC1.value.trim();
            const c2 = els.newC2.value.trim() || '-';
            const c3 = els.newC3.value.trim() || '-';
            
            if(!c1) return alert('å¤§ã‚«ãƒ†ã‚´ãƒªã¯å¿…é ˆã§ã™');

            try {
                const r = await fetch('/api/categories/create', {
                    method: 'POST', headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ category1: c1, category2: c2, category3: c3 })
                });
                const d = await r.json();
                if(r.ok) {
                    alert('ä½œæˆã—ã¾ã—ãŸ');
                    els.newC1.value = ''; els.newC2.value = ''; els.newC3.value = '';
                    loadCat1(); // ãƒªã‚¹ãƒˆæ›´æ–°
                } else {
                    alert('ã‚¨ãƒ©ãƒ¼: ' + d.message);
                }
            } catch(e) { alert('é€šä¿¡ã‚¨ãƒ©ãƒ¼'); }
        };

        // --- ã‚«ãƒ†ã‚´ãƒªèª­ã¿è¾¼ã¿ & UIæç”» (ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå¯¾å¿œç‰ˆ) ---
        const loadCat1 = () => { 
            resetUI(1); 
            // type=all ã‚’æŒ‡å®šã—ã¦ç©ºã‚«ãƒ†ã‚´ãƒªã‚‚å–å¾—
            loadList('/api/cat1?type=all', els.c1Box, 'å¤§ã‚«ãƒ†ã‚´ãƒª', (v) => { sels.c1 = v; handleSelect(); loadCat2(v); }, 1); 
        };
        const loadCat2 = (c1) => { 
            resetUI(2); 
            loadList(`/api/cat2/${encodeURIComponent(c1)}?type=all`, els.c2Box, 'ä¸­ã‚«ãƒ†ã‚´ãƒª', (v) => { sels.c2 = v; handleSelect(); loadCat3(c1, v); }, 2); 
        };
        const loadCat3 = (c1, c2) => { 
            resetUI(3); 
            loadList(`/api/cat3/${encodeURIComponent(c1)}/${encodeURIComponent(c2)}?type=all`, els.c3Box, 'å°ã‚«ãƒ†ã‚´ãƒª', (v) => { sels.c3 = v; handleSelect(); }, 3); 
        };

        async function loadList(url, container, title, onClick, level) {
            container.innerHTML = `<h4>${title}</h4>`;
            try {
                const r = await fetch(url); 
                const data = await r.json(); // [{name: "...", count: N}, ...]
                
                const filtered = data.filter(v => v.name !== 'default_cat1' && v.name !== 'default_cat2' && v.name !== 'default_cat3' && v.name !== '-' && v.name !== '__CATEGORY_NODE__');
                
                if (filtered.length === 0) {
                    container.innerHTML += '<p style="padding:10px; color:#ccc; text-align:center;">(ãªã—)</p>';
                    return;
                }
                
                filtered.forEach(item => {
                    const el = document.createElement('div'); 
                    el.className = 'gallery-item';
                    
                    const span = document.createElement('span');
                    // åå‰ã¨ã‚«ãƒƒã‚³å†…ã®æ•°å­—ã‚’è¡¨ç¤º
                    span.innerHTML = `${item.name} <span class="count-badge">(${item.count})</span>`;
                    span.style.flexGrow = '1';

                    // ç·¨é›†ãƒœã‚¿ãƒ³
                    const actions = document.createElement('div');
                    actions.className = 'item-actions';
                    const editBtn = document.createElement('button');
                    editBtn.className = 'edit-btn';
                    editBtn.innerHTML = 'âœ';
                    editBtn.title = 'åç§°å¤‰æ›´';
                    editBtn.onclick = (e) => { e.stopPropagation(); renameCategory(level, item.name); };
                    actions.appendChild(editBtn);

                    el.appendChild(span);
                    el.appendChild(actions);

                    el.onclick = () => {
                        container.querySelectorAll('.gallery-item').forEach(x => x.classList.remove('active'));
                        el.classList.add('active');
                        onClick(item.name); // åå‰ã ã‘æ¸¡ã™
                    };
                    container.appendChild(el);
                });
            } catch(e) { console.error(e); container.innerHTML += '<p style="color:red;">èª­è¾¼ã‚¨ãƒ©ãƒ¼</p>'; }
        }

        function resetUI(level) {
            if(level<=1) { els.c2Box.innerHTML='<h4>ä¸­ã‚«ãƒ†ã‚´ãƒª</h4>'; sels.c1=null; }
            if(level<=2) { els.c3Box.innerHTML='<h4>å°ã‚«ãƒ†ã‚´ãƒª</h4>'; sels.c2=null; }
            if(level<=3) { sels.c3=null; }
            handleSelect();
        }

        function handleSelect() {
            const path = [sels.c1, sels.c2, sels.c3].filter(Boolean).join(' > ');
            els.pathDisp.innerHTML = path ? `é¸æŠä¸­: <b style="color:#166534;">${path}</b>` : `é¸æŠä¸­: <span style="color:#999;">(ãªã—)</span>`;
            els.targetDisp.innerText = path ? `ç™»éŒ²å…ˆ: ${path}` : `ç™»éŒ²å…ˆ: (ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠã—ã¦ãã ã•ã„)`;
            
            // å…¥åŠ›æ¬„ã¸ã®è‡ªå‹•ã‚»ãƒƒãƒˆ
            if(sels.c1) els.newC1.value = sels.c1;
            if(sels.c2) els.newC2.value = sels.c2;
            
            renderCsvList();
        }

        async function renameCategory(level, oldName) {
            const newName = prompt(`ã€Œ${oldName}ã€ã®æ–°ã—ã„åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„:`, oldName);
            if(!newName || newName === oldName) return;

            let url = '';
            if(level === 1) url = `/api/cat1/${encodeURIComponent(oldName)}`;
            if(level === 2) url = `/api/cat2/${encodeURIComponent(sels.c1)}/${encodeURIComponent(oldName)}`;
            if(level === 3) url = `/api/cat3/${encodeURIComponent(sels.c1)}/${encodeURIComponent(sels.c2)}/${encodeURIComponent(oldName)}`;

            try {
                const r = await fetch(url, {
                    method: 'PUT', headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ newName: newName })
                });
                if(r.ok) {
                    alert('å¤‰æ›´ã—ã¾ã—ãŸ');
                    if(level===1) loadCat1();
                    else if(level===2) loadCat2(sels.c1);
                    else if(level===3) loadCat3(sels.c1, sels.c2);
                } else { alert('å¤‰æ›´ã«å¤±æ•—ã—ã¾ã—ãŸ'); }
            } catch(e) { alert('é€šä¿¡ã‚¨ãƒ©ãƒ¼'); }
        }

        // --- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ & å…¨ãƒ‡ãƒ¼ã‚¿ ---
        async function loadStats() { try { const d = await (await fetch('/api/products/stats')).json(); els.stImg.innerText = d.images; els.stProd.innerText = d.products; els.stLink.innerText = d.linked; } catch(e) {} }
        els.checkBtn.onclick = async () => {
            try { const d = await (await fetch('/api/debug/mismatch')).json(); alert(d.unlinkedProducts.length ? 'âš  æœªé€£æºã‚ã‚Š:\n'+d.unlinkedProducts.map(p=>p.product_name).join('\n') : 'âœ… ã™ã¹ã¦é€£æºæ¸ˆã¿'); } catch(e){ alert('Error'); }
        };
        els.showAllBtn.onclick = async () => {
            els.allDataBox.style.display = 'block'; els.allDataTable.innerHTML = '<tr><td>èª­è¾¼ä¸­...</td></tr>';
            try {
                const r = await fetch('/api/products/all'); const data = await r.json();
                if(!data.length){ els.allDataTable.innerHTML='<tr><td>ãªã—</td></tr>'; return; }
                let h = '<thead><tr><th>å•†å“å</th><th>å‹ç•ª</th><th>ä¾¡æ ¼</th><th>ç”»åƒå</th><th>æ›´æ–°æ—¥</th></tr></thead><tbody>';
                data.forEach(r => h += `<tr><td>${r.product_name}</td><td>${r.model_num1}</td><td>Â¥${r.ec_price}</td><td>${r.image_filename}</td><td>${new Date(r.updated_at).toLocaleDateString()}</td></tr>`);
                els.allDataTable.innerHTML = h + '</tbody>';
            } catch(e){ els.allDataTable.innerHTML='<tr><td>ã‚¨ãƒ©ãƒ¼</td></tr>'; }
        };

        // --- CSVä¸€è¦§ & ç™»éŒ² ---
        async function loadCsvList() { try { csvData = await (await fetch('/api/products/files')).json(); renderCsvList(); } catch(e) { els.csvList.innerText = 'èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼'; } }
        function renderCsvList() {
            const filtered = csvData.filter(f => {
                if(f.filename === '__CATEGORY_NODE__') return false;
                if(sels.c1 && f.category_1 !== sels.c1) return false;
                if(sels.c2 && f.category_2 !== sels.c2) return false;
                if(sels.c3 && f.category_3 !== sels.c3) return false;
                return true;
            });

            els.csvList.innerHTML = '';
            if(filtered.length===0) { els.csvList.innerHTML = '<div style="padding:10px; color:#999; text-align:center;">è©²å½“ã™ã‚‹CSVã¯ã‚ã‚Šã¾ã›ã‚“</div>'; return; }

            filtered.forEach(f => {
                const date = new Date(f.uploaded_at).toLocaleString('ja-JP');
                const catLabel = [f.category_1, f.category_2, f.category_3].filter(c=>c && c!=='æœªåˆ†é¡' && c!=='-').join(' > ');
                const div = document.createElement('div'); div.className = 'csv-item';
                div.innerHTML = `
                    <div class="csv-header"><span>ğŸ“„ ${f.filename}</span><div class="csv-actions"><button onclick="window.location.href='/api/products/files/${f.id}/download'" style="background:#17a2b8;">DL</button><button onclick="deleteCsv(${f.id})" style="background:#dc3545;">å‰Šé™¤</button></div></div>
                    <div class="csv-meta"><span class="csv-tag">ğŸ“‚ ${catLabel}</span><span>ğŸ“… ${date}</span></div>`;
                els.csvList.appendChild(div);
            });
        }

        els.impBtn.onclick = async () => {
            if(!els.csvIn.files.length) return alert('CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„');
            if(!sels.c1) return alert('ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠã—ã¦ãã ã•ã„');
            const fd = new FormData(); fd.append('csvFile', els.csvIn.files[0]); fd.append('category1', sels.c1); fd.append('category2', sels.c2||'-'); fd.append('category3', sels.c3||'-');
            els.impStat.innerText = "ç™»éŒ²ä¸­...";
            try { const r = await fetch('/api/products/import', {method:'POST', body:fd}); const d = await r.json(); if(!r.ok) throw new Error(d.message); els.impStat.innerText = "å®Œäº†"; els.csvIn.value=''; loadCsvList(); loadStats(); } catch(e) { els.impStat.innerText = "ã‚¨ãƒ©ãƒ¼: " + e.message; els.impStat.style.color="red"; }
        };
        async function deleteCsv(id) { if(!confirm('å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) return; await fetch(`/api/products/files/${id}`, {method:'DELETE'}); loadCsvList(); loadStats(); }
    </script>
</body>
</html>